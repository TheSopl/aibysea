---
phase: 04-grid-scale
plan: 01
type: execute
---

<objective>
Make Call Logs page fully responsive with mobile master-detail pattern.

Purpose: Call Logs is currently broken on mobile (w-96 fixed detail panel causes horizontal scroll). Implement list/detail toggle pattern for mobile like Inbox.
Output: Call Logs page usable on 320px+ screens with no horizontal scroll.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-view-adapt/17-01-SUMMARY.md
@.planning/phases/03-view-adapt/17-02-SUMMARY.md

# Current state
@src/app/(main)/call-logs/page.tsx

# Established patterns from Phase 17:
- Message bubbles: max-w-[85%] sm:max-w-xs tablet:max-w-sm lg:max-w-md
- Touch targets: min-h-[44px] for buttons, min-h-[72px] for list items
- TopBar with back button: showBackButton prop for mobile (lg:hidden)
- Sticky TopBar: sticky top-0 z-30 bg-white/95 backdrop-blur-sm

# Key constraint:
- w-96 detail panel (384px) is wider than 320px mobile screen
- Must implement list/detail toggle like inbox page
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement mobile master-detail pattern for Call Logs</name>
  <files>src/app/(main)/call-logs/page.tsx</files>
  <action>
Refactor Call Logs to use mobile-first list/detail pattern:

1. List panel: Show by default, hide on mobile when call selected
   - Add `className={cn("flex-1 ...", selectedCall && "hidden tablet:flex tablet:flex-col")}`

2. Detail panel: Full-screen overlay on mobile, fixed width on desktop
   - Replace `w-96` with responsive pattern:
   ```tsx
   className={cn(
     "fixed inset-0 z-40 bg-white dark:bg-slate-900",
     "tablet:relative tablet:w-96 tablet:flex-shrink-0",
     "tablet:border-l tablet:z-auto tablet:inset-auto"
   )}
   ```

3. Add back button to detail header:
   - Import ChevronLeft from lucide-react
   - Add back button that calls `setSelectedCall(null)`:
   ```tsx
   <button
     onClick={() => setSelectedCall(null)}
     className="tablet:hidden p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg"
   >
     <ChevronLeft size={24} />
   </button>
   ```

4. Make detail panel scrollable with safe insets:
   - Add `overflow-y-auto pb-safe` to detail content wrapper
   - Keep action buttons sticky at bottom on mobile

5. Import cn utility from @/lib/utils (create if not exists):
   ```tsx
   import { cn } from '@/lib/utils';
   ```

Do NOT:
- Change the existing filter logic or mock data
- Modify the transcription display styling (already works well)
- Add any new features beyond responsive layout
  </action>
  <verify>
- `npm run build` succeeds without errors
- No TypeScript errors in call-logs/page.tsx
  </verify>
  <done>
- List shows on mobile with call cards
- Tapping call shows full-screen detail with back button
- Back button returns to list
- Desktop layout unchanged (list + w-96 detail side by side)
  </done>
</task>

<task type="auto">
  <name>Task 2: Responsive filters and touch targets</name>
  <files>src/app/(main)/call-logs/page.tsx</files>
  <action>
Make filters mobile-friendly:

1. Responsive filter container padding:
   - Change `p-4` to `p-3 sm:p-4` on filter container

2. Status/Direction filter chips - ensure touch targets:
   - Add `min-h-[36px]` to filter buttons for touch accessibility
   - Ensure chips wrap properly with `flex-wrap`

3. Date range inputs - stack on mobile:
   - Wrap date inputs in responsive container:
   ```tsx
   <div className="flex flex-col sm:flex-row items-stretch sm:items-center gap-2">
   ```
   - Make inputs full width on mobile: `w-full sm:flex-1`

4. Call list items - touch targets:
   - Add `min-h-[72px]` to call list items for WCAG 2.5.8 compliance
   - Ensure padding is consistent: `p-3 sm:p-4`

5. Responsive text sizes:
   - Caller name: `text-sm` (already good)
   - Phone number: `text-xs` (already good)
   - Time/duration: ensure readable at `text-xs`

Do NOT:
- Change filter logic
- Modify the color scheme or status badges
- Remove any existing functionality
  </action>
  <verify>
- `npm run build` succeeds
- Filter chips render on single line where possible, wrap gracefully
- Date inputs stack on mobile (< 640px)
  </verify>
  <done>
- Filter chips have 36px minimum touch height
- Call list items have 72px minimum touch height
- Date range inputs stack vertically on mobile
- No horizontal scroll at 320px viewport
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Mobile-responsive Call Logs page with list/detail toggle</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open: http://localhost:3000/call-logs
    3. Test at 375px viewport (iPhone SE):
       - Call list visible
       - Tap a call â†’ full-screen detail appears
       - Back button returns to list
       - No horizontal scroll
    4. Test at 768px (tablet):
       - List and detail side-by-side
       - Detail panel ~384px width
    5. Test filter chips:
       - Tappable with comfortable touch targets
       - Date inputs stack on mobile
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] No TypeScript errors
- [ ] Call Logs page has no horizontal scroll at 320px
- [ ] Mobile list/detail toggle works correctly
- [ ] Touch targets meet WCAG 2.5.8 (44px minimum effective)
- [ ] Desktop layout unchanged
</verification>

<success_criteria>
- Call Logs page fully usable on mobile (320px+)
- Master-detail pattern matches established inbox pattern
- Filter chips and list items have proper touch targets
- No regression on desktop layout
</success_criteria>

<output>
After completion, create `.planning/phases/04-grid-scale/18-01-SUMMARY.md`
</output>
