---
phase: 17-view-adapt
plan: 02
type: execute
---

<objective>
Make Dashboard and Agents pages fully responsive with mobile-optimized layouts.

Purpose: Dashboard provides key metrics visibility, Agents page enables mobile agent management—both must work on mobile.
Output: Dashboard with mobile-friendly charts and cards, Agents page with full-screen detail panel on mobile.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-view-adapt/RESEARCH.md
@.planning/phases/03-view-adapt/17-01-SUMMARY.md (will exist after 17-01)

**Key files:**
@src/app/(main)/dashboard/page.tsx
@src/app/(main)/agents/page.tsx

**Tech stack available:**
- Custom breakpoints: xs, sm, md, tablet, lg, xl
- ResponsiveContainer from Recharts
- Tailwind responsive utilities

**Established patterns:**
- Responsive grid: grid-cols-1 md:grid-cols-2 lg:grid-cols-3
- Mobile detail overlay: fixed inset-0 z-40 tablet:relative tablet:inset-auto
- Touch targets: 44px minimum

**Constraining decisions:**
- Phase 15-02: Mobile card view for contacts table pattern
- Phase 16-02: Agents page already has stacked layout on mobile (flex-col lg:flex-row)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Dashboard Chart Height</name>
  <files>src/app/(main)/dashboard/page.tsx</files>
  <action>
Fix the chart ResponsiveContainer height override that doesn't work reliably:

1. Find the chart container (around line 289): `<ResponsiveContainer width="100%" height={200} className="md:!h-[300px]">`
2. The className override with !important doesn't work on ResponsiveContainer
3. Replace with a wrapper div approach:
   ```tsx
   <div className="h-[180px] tablet:h-[240px] lg:h-[300px]">
     <ResponsiveContainer width="100%" height="100%">
   ```
4. Remove the height prop and className from ResponsiveContainer

**What to avoid:** Don't use CSS overrides on ResponsiveContainer—it ignores className. Always use a wrapper div for responsive heights.
  </action>
  <verify>View dashboard on mobile (320px) - chart should be 180px tall; on tablet (768px) - 240px; on desktop - 300px</verify>
  <done>Chart heights are properly responsive: 180px mobile, 240px tablet, 300px desktop</done>
</task>

<task type="auto">
  <name>Task 2: Make Agents Detail Panel Full-Screen on Mobile</name>
  <files>src/app/(main)/agents/page.tsx</files>
  <action>
Convert the Agents detail panel to full-screen overlay on mobile:

1. Find the detail panel container (around line 381): `<div className="w-full lg:w-96 flex-shrink-0">`
2. Add mobile full-screen overlay pattern:
   ```tsx
   className={cn(
     "w-full lg:w-96 flex-shrink-0",
     selectedAgent && "fixed inset-0 z-40 bg-white dark:bg-slate-800 lg:relative lg:inset-auto lg:z-auto"
   )}
   ```
   Note: If cn utility not imported, add: `import { cn } from '@/lib/utils';`

3. Add a back button to the detail panel header for mobile:
   - Import ArrowLeft from lucide-react
   - Add a back button before the avatar that shows only on mobile (lg:hidden)
   - onClick should set `setSelectedAgent(null)`

4. Hide the agent list on mobile when detail is shown:
   Find the agents list container and add conditional hiding:
   ```tsx
   className={cn(
     "flex-1 min-w-0",
     selectedAgent && "hidden lg:block"
   )}
   ```

**What to avoid:** Don't change the desktop layout—only add mobile overlay behavior. Don't break the existing selection state.
  </action>
  <verify>On mobile (320px), select an agent - detail should be full screen with back button; on desktop - side panel as before</verify>
  <done>Agents detail panel is full-screen overlay on mobile with back navigation, desktop layout unchanged</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Responsive dashboard charts and mobile-optimized Agents page with full-screen detail overlay</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open Chrome DevTools, set viewport to iPhone SE (320px)

    **Dashboard verification:**
    3. Navigate to /dashboard
    4. Verify: Chart is visible and properly sized (~180px tall)
    5. Verify: All cards stack properly, no horizontal overflow
    6. Switch to tablet (768px) - chart should grow to ~240px

    **Agents verification:**
    7. Navigate to /agents
    8. Viewport: iPhone SE (320px)
    9. Verify: Agent list is visible
    10. Tap an agent card
    11. Verify: Detail panel slides in full-screen
    12. Verify: Back button appears (top-left)
    13. Tap back - returns to agent list
    14. Switch to desktop (1024px+) - detail should be side panel
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Dashboard charts render at correct heights on all breakpoints
- [ ] Agents detail panel is full-screen on mobile with back button
- [ ] Agents desktop layout is unchanged (side panel)
- [ ] No horizontal overflow on any page at 320px viewport
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Dashboard fully usable on mobile
- Agents page fully manageable on mobile
- Phase 17: Core Pages - Responsive is complete
</success_criteria>

<output>
After completion, create `.planning/phases/03-view-adapt/17-02-SUMMARY.md`

This completes Phase 17. Update STATE.md and ROADMAP.md to reflect completion.
</output>
