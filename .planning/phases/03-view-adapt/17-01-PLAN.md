---
phase: 17-view-adapt
plan: 01
type: execute
---

<objective>
Make the Inbox page fully functional on mobile devices with proper master-detail navigation pattern.

Purpose: The Inbox is the primary user interface—it must work flawlessly on mobile for operators to manage conversations on the go.
Output: Inbox page with responsive message bubbles, smooth conversation switching, proper context panel slide-in, and back navigation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-view-adapt/RESEARCH.md

**Prior phase context:**
@.planning/phases/02-nav-layer/16-02-SUMMARY.md

**Key files:**
@src/app/(main)/inbox/page.tsx

**Tech stack available:**
- Custom breakpoints: xs (320px), sm (375px), md (428px), tablet (768px), lg (1024px), xl (1280px)
- Zustand navigation store for state management
- Framer Motion for animations
- visualViewport API for keyboard detection

**Established patterns:**
- Touch target: min-w-[44px] min-h-[44px]
- Responsive padding: p-4 sm:p-6 lg:p-8
- Mobile-first stacking: flex-col tablet:flex-row

**Constraining decisions:**
- Phase 16-02: Swipe-to-close threshold: 100px offset OR 500 velocity
- Phase 16-02: 0.8 threshold for keyboard visibility detection
- Phase 15-02: 44px minimum touch targets per WCAG 2.5.8
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Message Bubble Width</name>
  <files>src/app/(main)/inbox/page.tsx</files>
  <action>
Fix the message bubble `max-w-md` (448px) that causes horizontal overflow on mobile devices:

1. Find the message bubble container (around line 771): `<div className="max-w-md">`
2. Replace with responsive width: `max-w-[85%] sm:max-w-xs tablet:max-w-sm lg:max-w-md`
   - 85% ensures bubbles fit on any screen
   - sm:max-w-xs = 320px for standard phones
   - tablet:max-w-sm = 384px for tablets
   - lg:max-w-md = 448px for desktop

Also add `break-words` class to the message text paragraph to prevent long words from breaking layout.

**What to avoid:** Don't use percentage-only widths without a cap—they look bad on desktop. Don't use fixed px values—they don't scale.
  </action>
  <verify>View inbox on 320px viewport (Chrome DevTools), send a long message - no horizontal scroll should occur</verify>
  <done>Message bubbles max at 85% viewport width on mobile, scale appropriately on larger screens, long words wrap correctly</done>
</task>

<task type="auto">
  <name>Task 2: Improve Conversation List Touch Targets</name>
  <files>src/app/(main)/inbox/page.tsx</files>
  <action>
Ensure conversation list items meet 44px minimum touch target:

1. Find conversation list items (around line 607-668): the `<div key={conv.id} onClick=...>` elements
2. Add minimum height: `min-h-[72px]` (keeps existing padding but ensures touch target)
3. The avatar is already 48px (w-12 h-12) which is compliant

Also improve the filter tabs touch targets:
1. Find filter tabs (around line 567-585): the tab buttons
2. Add `min-h-[44px]` to ensure touch compliance

**What to avoid:** Don't increase padding excessively—it wastes vertical space. Just ensure minimum heights.
  </action>
  <verify>Use Chrome DevTools to measure touch target height - should be at least 44px</verify>
  <done>All conversation list items are at least 44px tall, filter tabs are at least 44px tall</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Message bubbles with responsive widths and WCAG-compliant touch targets on conversation list</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open Chrome DevTools, set viewport to iPhone SE (320px)
    3. Navigate to /inbox
    4. Select a conversation with messages
    5. Verify: Message bubbles don't cause horizontal scroll
    6. Verify: Long messages wrap text properly
    7. Switch viewport to iPhone 14 (390px), iPad Mini (768px)
    8. Verify: Layout adapts, bubbles grow but never exceed container
    9. Test: Tap conversation items - should feel responsive (not too small)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] No horizontal scroll on inbox page at 320px viewport
- [ ] Message bubbles scale appropriately from mobile to desktop
- [ ] Conversation list items meet 44px minimum touch height
- [ ] Filter tabs meet 44px minimum touch height
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Inbox message view is fully usable on iPhone SE (320px)
</success_criteria>

<output>
After completion, create `.planning/phases/03-view-adapt/17-01-SUMMARY.md`
</output>
