---
phase: 21-ui-design-system-enforcement
plan: 01
type: execute
---

<objective>
Establish animation foundation for the platform by installing Framer Motion and creating reusable animation primitives.

Purpose: Enable smooth, professional animations throughout the UI without overwhelming users. Build the infrastructure for micro-interactions, page transitions, and scroll-based reveals.
Output: Framer Motion configured, animation variants library, PageTransition and FadeIn utility components ready for use across the platform.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-ui-design-system-enforcement/CONTEXT.md
@.planning/codebase/CONVENTIONS.md
@.planning/codebase/STRUCTURE.md

**Tech stack available:** Vitest + Testing Library (Phase 20), Next.js 16 with Turbopack, React 19, Tailwind CSS
**Established patterns:** cn() helper for class merging, 'use client' for client components, TypeScript strict mode
**User requirement:** "Crazy fancy but not overwhelming — the perfect middle ground" for animations

**From CONTEXT.md:**
- Framer Motion recommended as industry standard for React animations
- Animation timing: 150-300ms (snappy, not sluggish)
- Respect prefers-reduced-motion for accessibility
- Animation principles: Purposeful, Fast, Subtle, Consistent, Accessible
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Framer Motion and create animation variants library</name>
  <files>package.json, src/lib/animations/variants.ts, src/lib/animations/transitions.ts</files>
  <action>
    Install framer-motion: `npm install framer-motion`

    Create src/lib/animations/variants.ts with reusable animation presets:
    - fadeIn: opacity 0→1 with optional y offset
    - slideIn: slide from direction (left/right/up/down) with fade
    - scaleUp: scale 0.95→1 with fade (for modals, cards)
    - stagger: container/item pattern for sequential animations
    - All variants should be fast (150-300ms duration)

    Create src/lib/animations/transitions.ts with timing configs:
    - spring: { type: "spring", stiffness: 400, damping: 17 } (snappy feel)
    - easeOut: { type: "tween", ease: "easeOut", duration: 0.2 }
    - smooth: { type: "tween", ease: [0.4, 0, 0.2, 1], duration: 0.3 }

    Use TypeScript with proper types from framer-motion (Variants, Transition).
  </action>
  <verify>npm list framer-motion shows installed, variants.ts and transitions.ts exist and compile without errors</verify>
  <done>Framer Motion installed, variants library created with fadeIn/slideIn/scaleUp/stagger presets, transition configs defined</done>
</task>

<task type="auto">
  <name>Task 2: Create PageTransition and FadeIn utility components</name>
  <files>src/components/ui/PageTransition.tsx, src/components/ui/FadeIn.tsx</files>
  <action>
    Create src/components/ui/PageTransition.tsx:
    - 'use client' component that wraps page content
    - Uses motion.div with fadeIn + slight y offset animation
    - Props: children (ReactNode)
    - Respects prefers-reduced-motion: `const shouldReduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches`
    - If shouldReduceMotion, disable animations (return children without motion)
    - Transition: 300ms easeOut for route changes

    Create src/components/ui/FadeIn.tsx:
    - 'use client' component for scroll-based reveals
    - Uses Intersection Observer to trigger animation when in viewport
    - Props: children (ReactNode), delay (number, optional), threshold (0-1, default 0.1)
    - Uses motion.div with fadeIn + y: 20 offset
    - Only animates once when first entering viewport (triggerOnce pattern)
    - Respects prefers-reduced-motion

    Use TypeScript, export default for both components.
  </action>
  <verify>Both components exist, compile without TypeScript errors, can be imported from @/components/ui/PageTransition and @/components/ui/FadeIn</verify>
  <done>PageTransition wrapper created for route changes, FadeIn component created for scroll reveals, both respect prefers-reduced-motion</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] Framer Motion appears in package.json dependencies
- [ ] All animation files compile and export correctly
- [ ] No TypeScript errors in animations/ directory
</verification>

<success_criteria>

- All tasks completed
- Framer Motion installed and configured
- Animation variants library created with reusable presets
- PageTransition and FadeIn components ready to use
- All code follows TypeScript strict mode
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/21-ui-design-system-enforcement/21-01-SUMMARY.md`:

# Phase 21 Plan 1: Animation Foundation & System Summary

**[One-liner about what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 21-02-PLAN.md (Animated UI Components)
</output>
