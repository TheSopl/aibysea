---
phase: 21-ui-design-system-enforcement
plan: 03
type: execute
---

<objective>
Enforce Tailwind design tokens across the entire platform by auditing and replacing custom spacing, typography, and color values.

Purpose: Eliminate inconsistencies in spacing (px-3, px-4, px-6 mix), typography (custom text-* sizes), and colors (direct blue-500, purple-600 usage). Establish design system discipline that makes the UI feel cohesive and professional.
Output: All 25+ pages and components using consistent design tokens from tailwind.config.js. Visual consistency across light/dark mode, all breakpoints.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-ui-design-system-enforcement/CONTEXT.md
@.planning/phases/21-ui-design-system-enforcement/21-01-SUMMARY.md
@.planning/phases/21-ui-design-system-enforcement/21-02-SUMMARY.md
@.planning/codebase/CONVENTIONS.md
@.planning/codebase/CONCERNS.md
@.planning/codebase/STRUCTURE.md
@tailwind.config.js

**From CONCERNS.md:**
- Inconsistent spacing: px-3, px-4, px-6, p-4, p-6 mixed throughout
- Typography not using tokens: text-3xl, text-2xl, text-xl instead of heading-1/2/3
- Direct color values: bg-blue-500, text-purple-600 instead of semantic tokens
- Service color coding not consistently applied (Voice=teal, Docs=orange)

**Design tokens available (tailwind.config.js):**
- Spacing: page, page-sm, page-md, page-lg, section, card, card-md, card-lg
- Typography: heading-1, heading-2, heading-3, heading-1-sm, heading-1-md, heading-1-lg
- Colors: primary-*, accent-*, service-voice-*, service-documents-*
- Shadows: shadow-card, shadow-card-hover, service-*-glow

**Files to audit (25+ pages):**
- src/app/[locale]/(main)/**/*.tsx (all main app pages)
- src/components/**/*.tsx (all components)
- Focus on: ResponsiveContainer, Sidebar, TopBar, BottomNav, dashboard components, page files

**Patterns from Phase 8 (STATE.md):**
- Conversational service: accent (blue/purple)
- Voice service: teal (service-voice-*)
- Documents service: orange (service-documents-*)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and fix spacing tokens across all pages and components</name>
  <files>src/app/[locale]/(main)/**/*.tsx, src/components/**/*.tsx</files>
  <action>
    Systematically replace custom spacing with design tokens:

    **Pattern search and replace:**
    1. Page-level padding:
       - `px-4`, `px-6`, `px-8` → `px-page` (base mobile padding)
       - Responsive: `px-4 sm:px-5 tablet:px-6 lg:px-8` → `px-page-sm md:px-page-md lg:px-page-lg`

    2. Section spacing:
       - `py-6`, `py-8` → `py-section` (vertical section spacing)
       - `space-y-6`, `space-y-8` → `space-y-section`

    3. Card padding:
       - `p-4` → `p-card` (default card padding)
       - `p-6` → `p-card-md` (medium card padding)
       - `p-8` → `p-card-lg` (large card padding)

    4. Component-specific:
       - Update ResponsiveContainer.tsx to use tokens
       - Update Sidebar.tsx navigation padding
       - Update TopBar.tsx header spacing
       - Update BottomNav.tsx item spacing

    **Files to prioritize:**
    - src/components/ui/ResponsiveContainer.tsx
    - src/components/layout/Sidebar.tsx
    - src/app/[locale]/(main)/dashboard/page.tsx
    - src/app/[locale]/(main)/inbox/page.tsx
    - src/app/[locale]/(main)/agents/page.tsx
    - All other page files in (main)/

    Use grep to find all instances: `grep -r "px-[0-9]" src/app src/components --include="*.tsx"`

    Preserve physical positioning (left-0 for fixed sidebar is correct, don't change to start-0).
  </action>
  <verify>grep -r "px-[0-9] \|py-[0-9] \|p-[0-9] " src/ --include="*.tsx" shows significantly fewer results, spacing is consistent across pages</verify>
  <done>All pages and components use design tokens for spacing (px-page, py-section, p-card variants), custom px-*/py-*/p-* values replaced, visual consistency achieved</done>
</task>

<task type="auto">
  <name>Task 2: Audit and fix typography tokens</name>
  <files>src/app/[locale]/(main)/**/*.tsx, src/components/**/*.tsx</files>
  <action>
    Replace custom text sizes with typography tokens:

    **Heading replacements:**
    - `text-3xl` → `text-heading-1` (or `heading-1` if defined as class)
    - `text-2xl` → `text-heading-2`
    - `text-xl` → `text-heading-3`

    **Add responsive variants where appropriate:**
    - Page titles: `text-heading-1 md:text-heading-1-md lg:text-heading-1-lg`
    - Section headings: `text-heading-2 md:text-heading-2-md`
    - Card titles: `text-heading-3`

    **Check tailwind.config.js for exact token names** - if heading tokens are defined differently, use those names.

    **Files to update:**
    - All page files: dashboard, inbox, agents, voice-agents, documents, settings
    - TopBar.tsx (page title)
    - Card titles in dashboard
    - Modal titles (AgentFormModal, DeleteConfirmModal)
    - All h1, h2, h3 elements

    Use grep to find: `grep -r "text-[0-9]xl" src/ --include="*.tsx"`

    Preserve body text sizes (text-sm, text-base) - only replace headings.
  </action>
  <verify>grep -r "text-[0-9]xl" src/ --include="*.tsx" shows minimal or zero results for headings, all major headings use typography tokens</verify>
  <done>All heading elements use typography tokens (heading-1/2/3), responsive variants applied where appropriate, text hierarchy is consistent across platform</done>
</task>

<task type="auto">
  <name>Task 3: Audit and fix color tokens and service color coding</name>
  <files>src/app/[locale]/(main)/**/*.tsx, src/components/**/*.tsx</files>
  <action>
    Replace direct color values with semantic tokens:

    **Primary/accent colors:**
    - `bg-blue-500`, `bg-blue-600` → `bg-primary-500`, `bg-primary-600`
    - `text-blue-500`, `text-blue-600` → `text-primary-500`, `text-primary-600`
    - `bg-purple-500`, `bg-purple-600` → `bg-accent-500`, `bg-accent-600` (conversational service)
    - `text-purple-500`, `text-purple-600` → `text-accent-500`, `text-accent-600`

    **Service-specific colors:**
    - Voice module pages (voice-agents, calls, phone-numbers):
      - `bg-teal-*`, `text-teal-*` → `bg-service-voice-*`, `text-service-voice-*`
    - Documents module pages (documents, templates, processing-queue):
      - `bg-orange-*`, `text-orange-*` → `bg-service-documents-*`, `text-service-documents-*`
    - Conversational module (dashboard, inbox, agents):
      - Already using primary/accent, verify consistency

    **Shadow tokens:**
    - Replace custom box-shadow with `shadow-card`, `hover:shadow-card-hover`
    - Service glows: `shadow-service-voice-glow`, `shadow-service-documents-glow`

    **Files to update:**
    - Voice pages: src/app/[locale]/(main)/voice-agents/**, calls/**, phone-numbers/**
    - Documents pages: src/app/[locale]/(main)/documents/**, processing-queue/**, extracted-data/**
    - Dashboard components with service cards
    - Navigation components (Sidebar service module colors)

    Use grep to find: `grep -r "bg-blue-\|text-purple-\|bg-teal-\|bg-orange-" src/ --include="*.tsx"`

    Preserve utility colors (bg-red-* for errors, bg-green-* for success, bg-gray-* for neutrals).
  </action>
  <verify>grep shows minimal direct color usage, service color coding consistent (Voice=teal tokens, Docs=orange tokens), primary/accent used for brand colors</verify>
  <done>All direct color values replaced with semantic tokens, service color coding enforced (Voice pages use service-voice-*, Documents use service-documents-*), brand colors use primary-*/accent-* consistently</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] Visual inspection in browser: spacing looks consistent
- [ ] Visual inspection: typography hierarchy is clear
- [ ] Visual inspection: service colors correct (Voice=teal, Docs=orange)
- [ ] Test in light and dark mode (no broken colors)
- [ ] Test at all breakpoints (mobile, tablet, desktop)
</verification>

<success_criteria>

- All tasks completed
- Design tokens enforced for spacing, typography, colors
- No custom px-*/py-*/text-xl/direct colors in page files
- Service color coding consistent across modules
- Visual consistency verified in light/dark mode
- Build and lint pass without errors
</success_criteria>

<output>
After completion, create `.planning/phases/21-ui-design-system-enforcement/21-03-SUMMARY.md`:

# Phase 21 Plan 3: Design Token Enforcement Summary

**[One-liner about what shipped]**

## Accomplishments

- [Key outcomes]
- [Files audited count]
- [Patterns replaced count]

## Files Created/Modified

- [List of modified pages and components]

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 21-04-PLAN.md (Component Migration & Animation Polish)
</output>
