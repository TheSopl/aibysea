---
phase: 18.1-internationalization
plan: 03
type: execute
---

<objective>
Audit and convert CSS for RTL support, translate core pages (Dashboard, Inbox, Agents).

Purpose: Ensure Arabic RTL layout works correctly and translate the most-used pages.
Output: RTL-safe CSS throughout, Dashboard/Inbox/Agents fully translated.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/18.1-internationalization/18.1-RESEARCH.md
@.planning/phases/18.1-internationalization/18.1-02-SUMMARY.md

**Key files to audit:**
@src/components/layout/Sidebar.tsx
@src/components/layout/BottomNav.tsx
@src/components/layout/MobileNav.tsx
@src/app/globals.css

**Core pages:**
@src/app/(main)/dashboard/page.tsx
@src/app/(main)/inbox/page.tsx
@src/app/(main)/agents/page.tsx

**From research - Tailwind logical property mappings:**
- ml-* -> ms-* (margin-inline-start)
- mr-* -> me-* (margin-inline-end)
- pl-* -> ps-* (padding-inline-start)
- pr-* -> pe-* (padding-inline-end)
- left-* -> start-*
- right-* -> end-*
- text-left -> text-start
- text-right -> text-end
- border-l-* -> border-s-*
- border-r-* -> border-e-*
- rounded-l-* -> rounded-s-*
- rounded-r-* -> rounded-e-*
</context>

<tasks>

<task type="auto">
  <name>Task 1: RTL CSS audit - Convert directional classes to logical properties</name>
  <files>All .tsx files in src/components/, src/app/</files>
  <action>
Systematically find and replace directional Tailwind classes with logical properties:

1. Search for these patterns and replace:
   - `ml-` -> `ms-` (margin-left to margin-start)
   - `mr-` -> `me-` (margin-right to margin-end)
   - `pl-` -> `ps-` (padding-left to padding-start)
   - `pr-` -> `pe-` (padding-right to padding-end)
   - `left-` -> `start-` (positioning)
   - `right-` -> `end-` (positioning)
   - `text-left` -> `text-start`
   - `text-right` -> `text-end`
   - `border-l-` -> `border-s-`
   - `border-r-` -> `border-e-`
   - `rounded-l-` -> `rounded-s-`
   - `rounded-r-` -> `rounded-e-`
   - `-ml-` -> `-ms-` (negative margins)
   - `-mr-` -> `-me-`

2. Special cases to preserve (do NOT convert):
   - Layout-specific horizontal classes where direction matters regardless of locale (rare)
   - Sidebar `left-0` positioning (desktop sidebar always on left)
   - BUT: mobile drawer should use `start-0` for RTL flip

3. Focus areas:
   - All layout components (Sidebar, TopBar, BottomNav, MobileNav)
   - All page layouts
   - Card components
   - Form inputs
   - Buttons with icons

4. Update globals.css if any directional rules exist.

**Strategy:** Use grep to find all instances, review context, replace systematically.

**Avoid:** Do NOT blindly replace - some positioning (like fixed desktop sidebar) should stay `left-0`. Review each case.
  </action>
  <verify>grep -r "ml-\|mr-\|pl-\|pr-\|text-left\|text-right\|border-l-\|border-r-" src/ returns minimal hits (only intentional ones)</verify>
  <done>All directional CSS converted to logical properties except intentional exceptions (documented)</done>
</task>

<task type="auto">
  <name>Task 2: Translate Dashboard page</name>
  <files>src/app/[locale]/(main)/dashboard/page.tsx, src/messages/en.json, src/messages/tr.json, src/messages/ar.json</files>
  <action>
1. Move dashboard page to [locale] segment if not already done.

2. Update page.tsx:
   - Import useTranslations from 'next-intl'
   - Import setRequestLocale from 'next-intl/server' (if server component)
   - Call setRequestLocale(locale) at top for static rendering
   - Get params.locale from page props
   - Replace all hardcoded strings:
     - "Conversational AI" -> t('conversationalAI')
     - "Voice Agents" -> t('voiceAgents')
     - "Document Intelligence" -> t('documentIntelligence')
     - "View Inbox" -> t('viewInbox')
     - "Manage Voice" -> t('manageVoice')
     - "Process Documents" -> t('processDocuments')
     - "Recent Activity" -> t('recentActivity')
     - All stat labels and values

3. Add Dashboard translations to messages files:
   - Card titles
   - Stat labels with ICU pluralization
   - Button text
   - Section headers

4. Update TopBar title passed from dashboard to use translation.

**ICU format for counts:**
```json
"conversations": "{count, plural, =0 {No conversations} one {1 conversation} other {{count} conversations}}"
```

**Avoid:** Do NOT hardcode any user-visible text. Every string should come from translations.
  </action>
  <verify>Dashboard renders in all 3 languages, no hardcoded text visible</verify>
  <done>Dashboard page fully translated for EN/TR/AR</done>
</task>

<task type="auto">
  <name>Task 3: Translate Inbox and Agents pages</name>
  <files>src/app/[locale]/(main)/inbox/page.tsx, src/app/[locale]/(main)/agents/page.tsx, src/messages/*.json</files>
  <action>
1. Update Inbox page:
   - Move to [locale] segment
   - Import useTranslations, setRequestLocale
   - Add Inbox namespace to translation files:
     - title, noConversations, selectConversation
     - Message labels: sent, received, typing
     - Status: online, offline, away
     - Actions: reply, takeover, markResolved
   - Replace all hardcoded strings

2. Update Agents page:
   - Move to [locale] segment
   - Import useTranslations, setRequestLocale
   - Add Agents namespace to translation files:
     - title, createAgent, editAgent, deleteAgent
     - Status: active, inactive, configuring
     - Fields: name, description, instructions, triggers
     - Buttons: save, cancel, activate, deactivate
   - Replace all hardcoded strings

3. Add any shared component translations (modals, forms, etc.)

**For client components within pages:** They can use useTranslations directly thanks to NextIntlClientProvider.

**Avoid:** Do NOT forget to update any child components that have hardcoded text.
  </action>
  <verify>Inbox and Agents pages render in all 3 languages, forms and buttons show translated text</verify>
  <done>Inbox and Agents pages fully translated for EN/TR/AR</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>RTL CSS conversion and core page translations (Dashboard, Inbox, Agents)</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/ar/dashboard
    3. Verify: Page renders right-to-left (text aligned right, layout mirrored)
    4. Verify: All Dashboard text is in Arabic
    5. Visit: http://localhost:3000/ar/inbox
    6. Verify: Inbox layout is RTL (conversation list position, message alignment)
    7. Visit: http://localhost:3000/ar/agents
    8. Verify: Agent cards and forms are RTL
    9. Switch to Turkish (/tr) and verify translations work
    10. Switch to English (/en or /) and verify default behavior
    11. Check: No layout breaking, no missing translations
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any RTL or translation issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] RTL layout works correctly in Arabic
- [ ] Dashboard fully translated (EN/TR/AR)
- [ ] Inbox fully translated (EN/TR/AR)
- [ ] Agents page fully translated (EN/TR/AR)
- [ ] No hardcoded text in core pages
- [ ] Human verification passed
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- RTL CSS audit complete
- Core pages (Dashboard, Inbox, Agents) fully translated
- Human verified RTL and translations work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/18.1-internationalization/18.1-03-SUMMARY.md`:

# Phase 18.1 Plan 03: RTL CSS & Core Pages Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- [List of files with descriptions]

## RTL Audit Results

- Classes converted: [count]
- Intentional exceptions: [list with reasons]

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 18.1-04-PLAN.md (Secondary Pages Translation)
</output>
