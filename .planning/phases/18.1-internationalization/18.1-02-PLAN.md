---
phase: 18.1-internationalization
plan: 02
type: execute
---

<objective>
Create comprehensive translation files and update navigation components with i18n.

Purpose: Build the translation foundation (JSON files) and make navigation fully translatable.
Output: Complete translation files for EN/TR/AR, all navigation components using translations.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/18.1-internationalization/18.1-RESEARCH.md
@.planning/phases/18.1-internationalization/18.1-01-SUMMARY.md

**Key files:**
@src/components/layout/Sidebar.tsx
@src/components/layout/BottomNav.tsx
@src/components/layout/MobileNav.tsx
@src/components/layout/TopBar.tsx

**From research:**
- Use ICU message format for pluralization (especially important for Arabic with 6 plural forms)
- Namespace translations by feature: Common, Navigation, Dashboard, etc.
- Import navigation (Link, useRouter, usePathname) from @/i18n/navigation, not next/navigation
- Use useTranslations('Namespace') hook in components
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create comprehensive translation files</name>
  <files>src/messages/en.json, src/messages/tr.json, src/messages/ar.json</files>
  <action>
Create three translation files with these namespaces:

**Common namespace (shared across app):**
- appName, loading, save, cancel, delete, edit, search, noResults, error, success
- create, update, view, back, close, confirm, yes, no, all, none
- status labels: active, inactive, pending, completed, failed

**Navigation namespace:**
- dashboard, inbox, agents, contacts
- voiceAgents, callLogs, phoneNumbers, voiceSettings
- upload, processing, templates, data
- settings, more, profile, logout

**Dashboard namespace:**
- title, conversationalAI, voiceAgents, documentIntelligence
- Stat labels with pluralization using ICU format:
  - conversations: "{count, plural, =0 {No conversations} one {1 conversation} other {{count} conversations}} today"
  - calls: "{count, plural, =0 {No calls} one {1 call} other {{count} calls}} today"
  - documents: "{count, plural, =0 {No documents} one {1 document} other {{count} documents}} processed"
- viewInbox, manageVoice, processDocuments
- recentActivity, activeAgents, topChannels

**TopBar namespace:**
- searchPlaceholder: "Search conversations, AI agents, contacts..."
- notifications, toggleDarkMode

Use exact translations from RESEARCH.md code examples for Arabic and Turkish.

**Arabic specifics:** Include all 6 plural forms (zero, one, two, few, many, other) for count-based strings.
  </action>
  <verify>JSON files are valid (no syntax errors), all three files have same keys</verify>
  <done>Complete translation files for EN/TR/AR with Common, Navigation, Dashboard, TopBar namespaces</done>
</task>

<task type="auto">
  <name>Task 2: Update navigation components for translations</name>
  <files>src/components/layout/Sidebar.tsx, src/components/layout/BottomNav.tsx, src/components/layout/BottomNavItem.tsx, src/components/layout/MobileNav.tsx</files>
  <action>
1. Update Sidebar.tsx:
   - Import useTranslations from 'next-intl'
   - Import Link from '@/i18n/navigation' instead of 'next/link'
   - Import usePathname from '@/i18n/navigation' instead of 'next/navigation'
   - Get translations: const t = useTranslations('Navigation')
   - Replace hardcoded names in navigation object with t('key'):
     - 'Dashboard' -> t('dashboard')
     - 'Inbox' -> t('inbox')
     - etc.
   - For module names (Conversational, Voice, Documents), add to Navigation namespace

2. Update BottomNav.tsx:
   - Import Link from '@/i18n/navigation'
   - Import usePathname from '@/i18n/navigation'
   - Import useTranslations from 'next-intl'
   - Replace hardcoded labels: t('dashboard'), t('inbox'), t('agents'), t('voice'), t('more')

3. Update BottomNavItem.tsx:
   - Import Link from '@/i18n/navigation' instead of 'next/link'

4. Update MobileNav.tsx:
   - Import Link from '@/i18n/navigation'
   - Import useTranslations from 'next-intl'
   - Replace all hardcoded text with translations

**Critical:** All client components ('use client') can use useTranslations - next-intl handles this via NextIntlClientProvider.

**Avoid:** Do NOT import from 'next/navigation' or 'next/link' - use @/i18n/navigation for locale-aware routing.
  </action>
  <verify>npm run build succeeds, navigation shows translated text when switching locales</verify>
  <done>All navigation components use translations, navigation imports from @/i18n/navigation</done>
</task>

<task type="auto">
  <name>Task 3: Add LanguageSwitcher and update TopBar</name>
  <files>src/components/LanguageSwitcher.tsx, src/components/layout/TopBar.tsx</files>
  <action>
1. Create src/components/LanguageSwitcher.tsx:
   - 'use client' directive
   - Import useLocale from 'next-intl'
   - Import useRouter, usePathname from '@/i18n/navigation'
   - Import routing from '@/i18n/routing'
   - Define localeNames: { en: 'English', tr: 'Turkce', ar: 'العربية' }
   - Render styled dropdown select:
     - Show current locale name
     - On change, call router.replace(pathname, { locale: newLocale })
   - Style with Tailwind to match existing UI (rounded-lg, hover states, dark mode support)
   - Add Globe icon from lucide-react

2. Update TopBar.tsx:
   - Import useTranslations from 'next-intl'
   - Import useRouter from '@/i18n/navigation' instead of 'next/navigation'
   - Add LanguageSwitcher next to theme toggle
   - Translate search placeholder using t('searchPlaceholder')
   - Translate title prop (note: title comes from page, so pages will pass translated title)

**LanguageSwitcher design:**
- Compact globe icon button that opens dropdown
- Shows language name in current language
- Positioned between search and theme toggle
- Works on both mobile and desktop

**Avoid:** Do NOT use window.location for navigation - use router.replace for SPA navigation.
  </action>
  <verify>LanguageSwitcher appears in TopBar, clicking switches language and URL updates accordingly</verify>
  <done>LanguageSwitcher component created, TopBar updated with translations and language selector</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Sidebar shows translated navigation items
- [ ] BottomNav shows translated labels
- [ ] MobileNav shows translated menu items
- [ ] LanguageSwitcher appears in TopBar
- [ ] Clicking language option changes URL to /tr or /ar
- [ ] All text changes when switching languages
- [ ] Arabic displays with correct font
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Complete translation files for EN/TR/AR
- All navigation components use translations
- LanguageSwitcher functional and styled
</success_criteria>

<output>
After completion, create `.planning/phases/18.1-internationalization/18.1-02-SUMMARY.md`:

# Phase 18.1 Plan 02: Translation Files & Navigation Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `src/messages/en.json` - English translations
- `src/messages/tr.json` - Turkish translations
- `src/messages/ar.json` - Arabic translations
- `src/components/LanguageSwitcher.tsx` - Language selector
- `src/components/layout/Sidebar.tsx` - Translations
- `src/components/layout/BottomNav.tsx` - Translations
- `src/components/layout/TopBar.tsx` - Translations

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 18.1-03-PLAN.md (RTL CSS & Core Pages)
</output>
