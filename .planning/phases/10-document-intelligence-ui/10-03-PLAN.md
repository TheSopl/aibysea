---
phase: 10-document-intelligence-ui
plan: 03
type: auto
---

<objective>
Create Template Builder page for creating and managing custom document extraction templates.

Purpose: Enable operators to create, customize, and manage templates for different document types without coding.

Output: New Template Builder page at `/templates` with template list, builder form, field definition interface, and preview capabilities.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-document-intelligence-ui/10-01-PLAN.md
@.planning/phases/10-document-intelligence-ui/10-02-PLAN.md
@src/app/(main)/voice-settings/page.tsx

**Reference patterns:**
- TopBar component for page headers
- Card-based layouts for template list
- Form-based configuration (like Voice Settings)
- Orange service colors: #F59E0B â†’ #EF4444
- Modal dialogs for detailed views
- Drag-and-drop interface patterns
- Field validation with help text

**Design specifications:**
- Service color: Orange gradient - apply to buttons, highlights, active states
- Template List: Show all templates with preview and usage stats
- Template Builder: Form to create/edit templates
- Field Builder: Interface to define extraction fields
- Preview: Show how template would look on sample document
- Mock data: 5 predefined templates + sample custom templates
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Template List and Template Builder form</name>
  <files>src/app/(main)/templates/page.tsx</files>
  <action>
  Create new page at `src/app/(main)/templates/page.tsx` with:

  1. TopBar component with title "Document Templates"

  2. Template statistics:
     - Total Templates: count
     - Active in Use: count
     - Success Rate: average extraction accuracy
     - Documents Processed: count using templates

  3. Template list section:
     - Card grid layout (3â†’2â†’1 columns responsive)
     - Cards show:
       - Template name
       - Document type icon
       - Description
       - Fields count
       - Usage count (documents processed)
       - Success rate percentage
       - Last modified date
     - Action buttons: Use, Edit, Duplicate, Delete
     - Status badge: Built-in, Custom, Archived
     - Click to expand and see field list

  4. "Create New Template" button:
     - Opens modal/slide-in panel with template builder form
     - Form fields:
       - Template Name (text input, required)
       - Document Type (dropdown: Invoice, Receipt, Contract, Form, Custom)
       - Description (textarea)
       - Category (text input, optional)
       - Tags (multi-select)

  5. Template builder form layout:
     - Collapsible sections:
       - Basic Info (name, type, description)
       - Fields Definition (field list with add button)
       - Validation Rules (field validation settings)
       - Preview Settings (how to display extracted data)
     - Save and Cancel buttons
     - "Save as Draft" option
     - Auto-save indicator

  6. Mock data:
     ```typescript
     const templates = [
       {
         id: 'invoice',
         name: 'Invoice',
         type: 'Invoice',
         description: 'Extract invoice line items and totals',
         status: 'built-in',
         fields: 5,
         usageCount: 1247,
         successRate: 96,
         lastModified: '2024-01-10',
         icon: 'ðŸ“„'
       },
       // ... 4-5 more built-in templates
       {
         id: 'custom-form',
         name: 'Custom Application Form',
         type: 'Custom',
         description: 'HR application form',
         status: 'custom',
         fields: 8,
         usageCount: 342,
         successRate: 88,
         lastModified: '2024-01-14',
         icon: 'ðŸ“‹'
       },
       // ... 3-4 more custom templates
     ]
     ```

  7. Styling:
     - Template cards with orange accent borders for "Active in Use"
     - Status badges: Green (Built-in), Blue (Custom), Gray (Archived)
     - Form inputs with orange focus rings
     - Buttons: Orange gradient
     - Icons: Orange colored
     - Modal/slide-in: Orange accent header
     - Hover effects on cards

  8. Responsive design:
     - Cards stack on mobile
     - Modal takes full width on mobile
     - Form fields full width with labels above
  </action>
  <verify>
  npm run dev && navigate to /templates
  - Page loads with TopBar showing "Document Templates"
  - Statistics cards display correct metrics
  - Template cards render with all information
  - Card grid is responsive (3â†’2â†’1 columns)
  - Status badges show correctly
  - "Create New Template" button opens form
  - Form renders with all required fields
  - Collapsible sections work
  - Orange colors applied throughout
  - Cards show field count and usage stats
  - No console errors
  </verify>
  <done>Template list and builder form created with statistics and template cards</done>
</task>

<task type="auto">
  <name>Task 2: Create Field Definition builder and template preview</name>
  <files>src/app/(main)/templates/page.tsx</files>
  <action>
  Enhance the template builder with field definition and preview:

  1. Field Definition builder:
     - "Add Field" button to add new extraction field
     - Field row shows:
       - Field Name (text input)
       - Field Type (dropdown: Text, Number, Date, Currency, Boolean, Select)
       - Required checkbox
       - Help text for extraction (textarea)
       - Validation rules (dropdown options based on type)
       - Delete button
     - Reorderable fields (drag-and-drop or up/down buttons)
     - Field preview (how it will appear in extracted data)

  2. Field type configurations:
     - Text: Min/Max length options
     - Number: Integer/Decimal, Min/Max value
     - Date: Format selector (MM/DD/YYYY, DD/MM/YYYY, ISO)
     - Currency: Currency selector, rounding options
     - Boolean: Label for true/false
     - Select: Option list with add/remove

  3. Template preview section:
     - Shows how extracted fields will look
     - Sample data visualization
     - "Preview on Sample" button shows extraction on example document
     - Field layout preview (single column, multi-column)

  4. Validation Rules section:
     - Toggle: Required fields
     - Toggle: Trim whitespace
     - Toggle: Auto-correct capitalization
     - Custom regex pattern (optional)

  5. Export/Share options:
     - Export as JSON button
     - Copy template link
     - Sharing settings

  6. Mock data with sample fields:
     ```typescript
     const templateFields = [
       {
         id: 1,
         name: 'Invoice Number',
         type: 'text',
         required: true,
         helpText: 'Extract invoice reference number',
         validation: 'alphanumeric',
         minLength: 1,
         maxLength: 50
       },
       {
         id: 2,
         name: 'Invoice Date',
         type: 'date',
         required: true,
         helpText: 'Extract invoice date',
         format: 'MM/DD/YYYY'
       },
       {
         id: 3,
         name: 'Total Amount',
         type: 'currency',
         required: true,
         helpText: 'Extract total amount',
         currency: 'USD'
       },
       // ... more sample fields
     ]
     ```

  7. Styling:
     - Field rows with clean layout
     - Type-specific icons (T for text, # for number, $ for currency, etc.)
     - Required indicator in red
     - Delete button with hover warning
     - Preview with light background
     - Orange highlights for active/selected fields
     - Smooth transitions for field additions/removals

  8. Responsive design:
     - Field builder forms stack vertically on mobile
     - Preview adjusts to screen size
     - Buttons full width on mobile
  </action>
  <verify>
  npm run dev && navigate to /templates
  - Field definition builder renders with all controls
  - "Add Field" button works and adds new field row
  - Field type dropdown shows all options
  - Different field types show appropriate validation options
  - Delete buttons remove fields correctly
  - Preview section displays field layout
  - Export buttons functional
  - Orange colors applied to active/required fields
  - Responsive layout works on mobile
  - Form validation works (required fields highlighted)
  - No console errors when adding/removing fields
  </verify>
  <done>Field definition builder and template preview implemented</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] No TypeScript errors in templates/page.tsx
- [ ] /templates page loads without errors
- [ ] Template list displays with all information
- [ ] Template cards show statistics and status correctly
- [ ] "Create New Template" opens builder form
- [ ] Template builder form renders with all sections
- [ ] Field definition builder works correctly
- [ ] Add/Delete field functionality works
- [ ] Field type dropdown shows appropriate options
- [ ] Template preview displays correctly
- [ ] Export and share buttons functional
- [ ] Orange service colors applied throughout
- [ ] Responsive layout works on all screen sizes
- [ ] All mock data displays correctly
</verification>

<success_criteria>

- Template Builder page created at `/templates` route
- Template list with cards showing metrics and status
- Template creation form with builder interface
- Field definition builder with add/delete/reorder capabilities
- Field type configurations with validation options
- Template preview showing extraction layout
- Statistics cards with template metrics
- Export and sharing capabilities
- Orange service colors (#F59E0B â†’ #EF4444) applied consistently
- Mock data with realistic templates and fields
- Responsive design for mobile/tablet/desktop
- All tasks completed successfully
- Phase 10 complete (Document Intelligence UI finished)
- Ready for Phase 11 (Backend Infrastructure)

</success_criteria>

<output>
After completion, create `.planning/phases/10-document-intelligence-ui/10-03-SUMMARY.md`:

# Phase 10 Plan 3: Template Builder Summary

**Created Template Builder page for managing document extraction templates.**

## Accomplishments

- Created `/templates` page with template list and management
- Implemented template statistics cards
- Built template creation form with builder interface
- Created field definition builder with add/delete/reorder capabilities
- Added template preview functionality
- Implemented field type validation options
- Added export and sharing capabilities
- Applied orange service colors throughout
- Integrated realistic mock data with sample templates and fields

## Files Created/Modified

- `src/app/(main)/templates/page.tsx` - Complete Template Builder page with list and builder

## Implementation Details

[Document the actual accomplishments from execution]

## Phase Completion

Phase 10 (Document Intelligence UI) complete. All three pages finished:
- âœ“ 10-01: Upload & Process page
- âœ“ 10-02: Processing Queue & Extracted Data pages
- âœ“ 10-03: Template Builder page

All pages use consistent orange service colors, card-based layouts, and realistic mock data.

Ready for Phase 11 (Backend Infrastructure) to add API routes and real functionality.
</output>
