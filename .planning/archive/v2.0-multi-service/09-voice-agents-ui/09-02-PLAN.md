---
phase: 09-voice-agents-ui
plan: 02
type: auto
---

<objective>
Create Call Logs page displaying call history with transcription viewer, filtering, and call analysis.

Purpose: Enable operators to review past calls, read transcriptions, and analyze agent performance with detailed call information.

Output: New Call Logs page at `/call-logs` with call history table, filters, and transcription detail view using teal service colors.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/(main)/inbox/page.tsx
@src/components/layout/Sidebar.tsx

**Reference patterns:**
- Inbox page shows conversation list with filtering and detail panel
- Uses two-panel layout: list on left, details on right
- Filter buttons for status, agent, date range
- Real-time indicators and timestamps

**Call Logs specifics:**
- Service color: Teal gradient (#10B981 â†’ #06B6D4)
- Columns: caller (phone/name), agent, duration, status, time, direction (inbound/outbound)
- Filters: Agent, Date Range, Status (Completed, Missed, Transferred), Direction
- Detail view: Full transcription, timeline of call events, sentiment analysis, keywords
- Status: Completed (green), Missed (red), Transferred (amber), Abandoned (gray)

**Design system available:**
- Teal service color from Phase 8-03
- Filter chip patterns from existing inbox
- Card and table patterns from agents page
- Animation patterns: fade-in, hover effects, stagger

**Constraints:**
- Create two-panel layout (list + detail)
- Mock data only (real logs in Phase 11)
- Support filtering by agent, date, status, direction
- Show transcription with speaker identification
- Include call timeline with events
- Responsive design (detail panel collapses on mobile)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create call logs list with filters and table/card display</name>
  <files>src/app/(main)/call-logs/page.tsx</files>
  <action>
  Create new page at `src/app/(main)/call-logs/page.tsx` with:

  1. TopBar component with title "Call Logs"

  2. Filter section at top:
     - Agent filter (dropdown): "All Agents", or specific agent names
     - Status filter (chips): All, Completed, Missed, Transferred, Abandoned
     - Direction filter (chips): All, Inbound, Outbound
     - Date range picker (from/to dates)

  3. Call logs list (2-panel layout):
     - Left panel (flex-1): List of calls
       - Each call shown as card or table row
       - Fields: Caller (phone/name), Agent, Duration, Status, Time, Direction
       - Status colors: green for Completed, red for Missed, amber for Transferred, gray for Abandoned
       - Click to select and show details

     - Right panel (w-96, sticky): Call detail view
       - Caller info, agent name, call time, duration
       - Status badge with color
       - Transcription section (speaker labels: Agent, Caller)
       - Call timeline with events (Connected, On Hold, Transferred, Ended)

  4. Create mock data:
     ```typescript
     const callLogs = [
       {
         id: 1,
         callerId: '+1-555-0123',
         callerName: 'John Smith',
         agent: 'Sales Voice Agent',
         duration: 4.2,
         status: 'completed',
         direction: 'inbound',
         time: '2026-01-16 14:30',
         transcription: [
           { speaker: 'Agent', text: 'Thank you for calling...' },
           { speaker: 'Caller', text: 'Hi, I need help with...' },
           // ... more lines
         ],
         sentiment: 'positive',
         events: [
           { time: '14:30:00', action: 'Call received' },
           { time: '14:30:02', action: 'Connected to agent' },
           { time: '14:34:15', action: 'Call ended' }
         ]
       },
       // ... 6-8 more calls
     ]
     ```

  5. Styling:
     - Use teal colors for highlights and active states
     - Status badges with service colors
     - Card backgrounds: white with shadow on hover
     - Transcription styling: alternating colors for Agent (teal) and Caller (gray)
     - Timeline: vertical line with event dots

  6. Filtering behavior:
     - Filter chips show selected state (highlighted background)
     - Clicking filter updates shown calls
     - Support multiple filters (AND logic)
  </action>
  <verify>
  npm run dev && navigate to /call-logs
  - Page loads with TopBar showing "Call Logs"
  - Filter section visible at top
  - Call logs list renders with all fields
  - Status badges show correct colors
  - Clicking a call shows details on the right
  - Transcription displays with speaker labels
  - Timeline shows call events
  - Filters work (clicking updates shown calls)
  - No console errors
  </verify>
  <done>Call Logs page created with filters, list, and detail panel with teal colors</done>
</task>

<task type="auto">
  <name>Task 2: Add call transcription viewer and timeline with sentiment analysis</name>
  <files>src/app/(main)/call-logs/page.tsx</files>
  <action>
  Enhance the call detail panel with:

  1. Transcription viewer improvements:
     - Full transcription with speaker labels
     - Agent speech: teal background
     - Caller speech: gray background
     - Timestamps for each line (optional)
     - Search/highlight keywords in transcription

  2. Call timeline:
     - Vertical line with event dots
     - Events: Call received, Connected, On hold, Transferred, Call ended
     - Event time stamps (HH:MM:SS format)
     - Event type icons (phone icon for received, check for connected, etc.)

  3. Call analysis section:
     - Sentiment indicator (positive/neutral/negative) with color coding
     - Keywords extracted (up to 5 most frequent words)
     - Tags/notes section (empty, ready for user input)

  4. Bottom action buttons:
     - "Download Recording" (if available)
     - "Add Note" (for operator notes)
     - "Replay Call" (placeholder for audio playback)

  5. Styling:
     - Transcription cards: subtle background, teal speaker label
     - Timeline: teal line and dots
     - Sentiment: green/neutral/red indicator
     - Keywords: teal badge-style chips
     - Buttons: teal accent color

  6. Responsive behavior:
     - Detail panel sticky on desktop
     - Collapses to bottom drawer on mobile
     - Transcription scrollable if long
  </action>
  <verify>
  npm run dev && navigate to /call-logs
  - Detail panel shows full transcription
  - Timeline displays with events and timestamps
  - Speaker labels color-coded (Agent teal, Caller gray)
  - Sentiment indicator shows
  - Keywords display as chips
  - Timeline vertical line and dots render correctly
  - Action buttons present at bottom
  - Detail panel sticky on desktop (scroll list, panel stays)
  - Hover effects work on transcription and timeline
  - No console errors or TypeScript errors
  </verify>
  <done>Call transcription viewer and timeline complete with sentiment analysis and action buttons</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] No TypeScript errors in call-logs/page.tsx
- [ ] /call-logs page loads without errors
- [ ] Filter chips work and update displayed calls
- [ ] Call list renders with all information
- [ ] Status badges show correct colors
- [ ] Detail panel shows selected call information
- [ ] Transcription displays with speaker labels
- [ ] Timeline shows call events with icons
- [ ] Sentiment analysis and keywords display
- [ ] Responsive design maintained
- [ ] All mock data displays correctly
</verification>

<success_criteria>

- Call Logs page created with filtering capabilities
- Call list displays with status, duration, agent, caller information
- Transcription viewer shows full call conversation with speaker labels
- Call timeline shows events with timestamps
- Sentiment analysis and keyword extraction included
- Teal service colors applied throughout
- Mock data properly integrated
- Responsive design maintained
- Ready for 09-03 (Phone Numbers and Settings)

</success_criteria>

<output>
After completion, create `.planning/phases/09-voice-agents-ui/09-02-SUMMARY.md`:

# Phase 9 Plan 2: Call Logs Page Summary

**Created Call Logs page with transcription viewer, timeline, and call analysis using teal service colors.**

## Accomplishments

- Created new page at `/call-logs` with TopBar component
- Implemented filter section (Agent, Status, Direction, Date Range)
- Built call logs list showing caller, agent, duration, status, time, direction
- Added detail panel with full call transcription and speaker labels
- Implemented call timeline with events and timestamps
- Added sentiment analysis and keyword extraction display
- Integrated action buttons (Download, Note, Replay)
- Applied teal service colors throughout
- Integrated mock data with 8+ sample calls

## Files Created/Modified

- `src/app/(main)/call-logs/page.tsx` - Complete Call Logs page with filters, list, and detail panel

## Implementation Details

### Filter Section
- **Agent Filter**: Dropdown to filter by specific voice agent
- **Status Filter**: Chips for Completed, Missed, Transferred, Abandoned
- **Direction Filter**: Chips for Inbound and Outbound calls
- **Date Range**: From/To date pickers for filtering by call date

### Call List
- Two-panel layout: list on left, details on right (w-96, sticky)
- Fields: Caller phone/name, assigned agent, duration, status, timestamp, direction
- Status colors: green (Completed), red (Missed), amber (Transferred), gray (Abandoned)
- Click to select call and show full details

### Detail Panel
- Caller information with phone number and name
- Call metadata: agent, time, duration, status
- Full transcription with speaker labels and color coding
  - Agent speech: Teal background
  - Caller speech: Gray background
- Call timeline showing events with icons and timestamps
- Sentiment analysis indicator (positive/neutral/negative)
- Keywords extracted from call conversation
- Action buttons: Download Recording, Add Note, Replay Call

## Design Decisions

- Two-panel layout for easy comparison with inbox patterns
- Transcription color-coding for quick speaker identification
- Timeline visualization for call flow understanding
- Mock data includes realistic transcription content and call metadata
- Filter chips for quick state filtering
- Teal accent colors throughout to maintain service identity

## Next Steps

Ready for 09-03-PLAN.md (Phone Numbers and Voice Settings pages)

</output>